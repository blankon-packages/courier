'\" t
.\"<!-- Copyright 1998 - 2015 Double Precision, Inc.  See COPYING for -->
.\"<!-- distribution information. -->
.\"     Title: courier
.\"    Author: Sam Varshavchik
.\" Generator: DocBook XSL Stylesheets vsnapshot <http://docbook.sf.net/>
.\"      Date: 07/24/2017
.\"    Manual: Double Precision, Inc.
.\"    Source: Courier Mail Server
.\"  Language: English
.\"
.TH "COURIER" "8" "07/24/2017" "Courier Mail Server" "Double Precision, Inc."
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
courier \- The Courier mail server
.SH "SYNOPSIS"
.HP \w'\fBcourier\fR\ 'u
\fBcourier\fR {start | stop | restart | flush | flush\ \fIqid\fR  | clear\ \fIuser@domain\fR  | clear\ all  | show\ all }
.SH "DESCRIPTION"
.PP
The
Courier
mail server is a modular multi\-protocol E\-mail transport agent\&. The
\fBcourier\fR
command is an administrative command, and most of its options are only available to the superuser\&.
.PP
"\fBcourier start\fR" starts the server by running
\fB@datadir@/courierctl\&.start\fR
in the background\&. "\fBcourier stop\fR" immediately stops all the
Courier
mail server processes and aborts all current mail deliveries\&. "\fBcourier restart\fR" restarts the
Courier
mail server server\&. A restart is often needed for certain configuration changes to take effect\&. "\fBcourier restart\fR" waits for all current deliveries to complete before restarting\&. This is the "nice" way to restart the mail server\&. "\fBcourier flush\fR" takes all undelivered messages in the queue and attempts to deliver them immediately, instead of waiting until their next scheduled attempted delivery time\&. "\fBcourier flush\fR" can be optionally followed by a message queue ID in order to schedule an immediate delivery attempt for only a single message\&. Message queue IDs are displayed by the
\m[blue]\fB\fBmailq\fR(1)\fR\m[]\&\s-2\u[1]\d\s+2
command\&.
.PP
Please note that
\fBcourier start\fR
runs the main
Courier
mail server scheduling engine only\&. It does not start any other daemons that you may have, such as the ESMTP or the IMAP daemon\&.
.PP
"\fBcourier show all\fR" lists all E\-mail addresses currently blacklisted for backscatter\&. "\fBcourier clear user@domain\fR" manually clears <user@domain> from the backscatter blacklist\&. "\fBcourier clear all\fR" removes all addresses from the backscatter blacklist\&. When the
Courier
mail server encounters a delivery failure to an E\-mail address the
Courier
mail server may stop accepting any more messages to the same address in order to minimize generation of so\-called "backscatter bounces"\&. This does not occur in all cases, see "Backscatter suppression" in the
Courier
mail server\*(Aqs installation instructions for more information\&.
.PP
The
Courier
mail server will resume accepting messages to the blacklisted address if the delivery attempt originally encountered a temporary failure, and a subsequent retry succesfully delivered the message, or if more than two hours elapsed since the delivery failure\&. Use the "clear" command to manually clear the E\-mail address from the backscatter blacklist\&. This may be useful if the undeliverable message is manually removed from the
Courier
mail server\*(Aqs mail queue, using the "cancel" command\&. Even if the message is cancelled, the
Courier
mail server will continue to refuse accepting mail for this address for up to two hours\&. The "clear" command can be use to reenable mail acceptance before then\&.
.SS "CONFIGURATION FILES"
.PP
The
Courier
mail server uses several configuration files which are located in
@sysconfdir@\&. These configuration files are plain text files that can be modified with any text editor\&. In certain instances a subdirectory is used, and all plain text files in the subdirectory are concatenated and are considered to be a single, consolidated, configuration file\&. Unless otherwise specified, you must run
\fBcourier restart\fR
for any changes to these files to take effect\&.
.PP
aliasfilteracct
.RS 4
This file contains one line, containing the home directory of the account that\*(Aqs used for filtering mail addressed to local alias lists\&.
.sp
When mail filtering is enabled, local recipients have the ability to define mail filters which can selectively reject unwanted mail\&.
@sysconfdir@/aliases
may define local mail aliases that contain one or more recipients\&. If it is desired to use local mail filtering for mail addressed to an alias address, designate a local account that will be used to specify filtering instructions, and put its home directory into this control file\&. The filtering argument will be "alias\-\fIaddress\fR" where
\fIaddress\fR
is the name of the alias\&. See
\m[blue]\fB\fBlocalmailfilter\fR(7)\fR\m[]\&\s-2\u[2]\d\s+2
for more information\&.
.sp
Due to technical limitations, content filtering is not available for multiple\-recipient aliases\&.
.sp
Changes to this file take effect immediately\&.
.RE
.PP
autoresponsesquota
.RS 4
This file sets the systemwide quota on autoreplies, if autoreplies and mail filtering are enabled\&. Note that this can only really be effective if there is no login access to the mail account, since this autoreply quota can be trivially overriden\&.
.sp
The
autoresponsesquota
file contains one line: "C\fInnn\fR" or "S\fInnn\fR" (or both strings, on the same line)\&.
C\fInnn\fR: allow up to #nnn autoreplies to be created\&.
S\fInnn\fR: allow up to #nnn bytes as the total size of all autoreplies, combined\&. If both
C\fInnn\fR
and
S\fInnn\fR
are specified, both quotas apply\&. If this file does not exist, there is no limit on autoreplies\&. This quota setting applies systemwide\&. To override the quota setting for a particular Maildir, create the
autoresponsesquota
file in that Maildir (which takes precedence)\&.
.RE
.PP
backuprelay
.RS 4
This file contains one line, containing a name of a machine where mail will be rerouted if it cannot be immediately delivered\&. Spaces are not allowed in this file\&.
.sp
Mail gets rerouted if it cannot be delivered after the time interval specified by the
warntime
configuration file\&. When
backuprelay
is provided a delayed delivery status notification will NOT be generated\&. The message will be rerouted even if the recipient\*(Aqs delivery status notification setting does not include a delayed notification request\&.
.sp
This feature is intended for use by relays that handle large quantities of mail, where you don\*(Aqt want to accumulate a large mail queue for unreachable mail servers\&. Please note that ALL undeliverable mail will be rerouted in this fashion\&. Even if the recipient of a message is a local recipient \- and the recipient\*(Aqs mail filter is rejecting the message with a temporary error code \- the message will still be rerouted if it\*(Aqs undeliverable after the specified amount of time\&.
.sp
Although currently SMTP is the only meaningful application for this feature, the
Courier
mail server is a protocol\-independent mail server, and the backup relay function can be extended to other protocols, as they become available\&.
.sp
Multiple backup relays can be used by simply assigning multiple
IP
addresses to the same machine name\&. Note that the
Courier
mail server checks for both MX and A records for the machine specified in this configuration file\&.
.sp
It\*(Aqs important to note that when this setting is specified, warning messages get turned off for all messages, including messages addressed to local recipients\&. If a temporary delivery error prevents a message from being delivered to a local mailbox, it remains in the queue until the temporary error condition gets cleared\&. Normally, if the message remains in the queue beyond the warning interval, the warning message gets generated\&. When this setting is specified, the warning message gets replaced with a forward to the backup relay, but this occurs only for messages that are delivered via SMTP\&.
.RE
.PP
batchsize
.RS 4
This file contains one line, containing a single number\&. This number specifies the absolute maximum number of recipients for a single message\&. If the
Courier
mail server receives a message with more recipients, the message is duplicated as often as necessary until each copy of the message has no more than
batchsize
recipients\&. If
batchsize
is missing, it defaults to 100 recipients per message\&.
.RE
.PP
bofh
.RS 4
This configuration file configures domain\-based junk mail filters\&. Lines in this configuration files that begin with the # character are considered comments, and are ignored\&. The remaining lines contain the following directives, in any order:
.PP
badfrom \fIuser@domain\fR
.RS 4
Reject all mail with the return address of
<user@domain>\&.
.RE
.PP
badfrom \fI@domain\fR
.RS 4
Reject all mail with the return address of
<anything@domain>\&.
.RE
.PP
badfrom \fI@\&.domain\fR
.RS 4
Reject all mail with the return address of
<anything@anything\&.domain>\&.
.RE
.PP
badfrom \fIuser@\&.domain\fR
.RS 4
Reject all mail with the return address of
<user@anything\&.domain>\&.
.RE
.PP
badmx \fIN\fR
.RS 4
Reject all mail with a return address in any mail domain whose listed mail servers include server "\fIN\fR"\&. "\fIN\fR" is an
IP
address\&. The
\fBBOFHCHECKDNS\fR
option in the
esmtp
configuration file must also be enabled (this is the default setting) in order for this additional checking to take place\&. Note that this is "best effort" check\&. A
DNS
failure to look up A records for hostnames returned in the MX record may hide the blacklisted server from view\&.
.RE
.PP
freemail \fIdomain\fR [\fIdomain2\fR] [\fIdomain3\fR]\&.\&.\&.
.RS 4
Reject all mail with a return address
\fI<anything@domain>\fR
unless the mail is received from a mail relay whose hostname is in the same domain\&. "\fIdomain2\fR" and "\fIdomain3\fR" are optional, and specifies other domains that the mail relay\*(Aqs hostname may belong to\&. For example: "\fIfreemail example\&.com domain\&.com\fR" specifies that mail with a return address
\fI@example\&.com\fR
will be accepted only from a mail relay with a hostname in the
\fIexample\&.com\fR
or
\fIdomain\&.com\fR
domain\&. Note that this setting requires that
DNS
lookup be enabled for incoming ESMTP connections (which is the default setting)\&.
.RE
.PP
spamtrap \fIuser@domain\fR
.RS 4
Reject all mail that has
\fI<user@domain>\fR
listed as one of its recipients\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
For local mailboxes, \*(Aqdomain\*(Aq must be set to the contents of the
me
configuration file, or the server\*(Aqs hostname\&. Also, this check is made after any alias processing takes place\&. Suggested usage: create a single local spamtrap account, then create aliases in the alias file that point to the spamtrap account\&.
.sp .5v
.RE
.RE
.PP
maxrcpts \fIN\fR [hard]
.RS 4
Accept the first
\fIN\fR
recipient addresses per message, maximum\&. The remaining recipients are rejected\&. An optional verbatim token "hard" specifies that the remaining recipients will immediately be returned as undeliverable (otherwise the remaining recipients are rejected as "temporary unavailable", and may be accepted on a later delivery attempt)\&. If not specified, the first 100 recipients are accepted\&.
.RE
.PP
opt BOFHCHECKHELO=1
.RS 4
Verify the hostname provided in the ESMTP HELO/EHLO statement\&.
\(lqopt BOFHCHECKHELO=1\(rq
is a global default, which may be overridden by setting the
\fBBOFHCHECKHELO\fR
environment variable in the SMTP access file\&. See
\m[blue]\fB\fBmakesmtpaccess\fR(8)\fR\m[]\&\s-2\u[3]\d\s+2
for more information\&.
\(lqopt BOFHCHECKHELO=1\(rq
enables ESMTP HELO/EHLO checking by default, and ESMTP HELO/EHLO checking may be turned off for individual
IP
address ranges by setting
\fBBOFHCHECKHELO\fR
to
0
using
\m[blue]\fB\fBmakesmtpaccess\fR(8)\fR\m[]\&\s-2\u[3]\d\s+2\&. Alternatively, HELO/EHLO checking may be turned off by default, and enabled for specific
IP
address ranges by using
\m[blue]\fB\fBmakesmtpaccess\fR(8)\fR\m[]\&\s-2\u[3]\d\s+2
to set
\fBBOFHCHECKHELO\fR
to
1\&. See
\m[blue]\fB\fBmakesmtpaccess\fR(8)\fR\m[]\&\s-2\u[3]\d\s+2
for more information\&.
.RE
.PP
opt BOFHCHECKHELO=2
.RS 4
Setting to
\fBBOFHCHECKHELO\fR
2
has the effect of returning a temporary SMTP error code, instead of a permanent SMTP error code, for a failed HELO/EHLO SPF check\&.
.RE
.PP
opt BOFHHEADERLIMIT=\fIn\fR
.RS 4
Reject messages whose headers exceed
\fIn\fR
bytes in size (minimum 1,000 bytes, default 100,000 bytes)\&.
.RE
.PP
opt BOFHNOBASE64TEXT=1
.RS 4
Reject messages with base64\-encoded
text/plain
or
text/html
content\&.
.RE
.PP
opt BOFHSPFHELO=\fIkeywords\fR
.RS 4
Use Sender Policy Framework to verify the
HELO
or
EHLO
domain sent by the connecting SMTP client\&. See
Sender Policy Framework Keywords
below for a list of possible keywords\&.
.sp
SPF checking is not used for
HELO
or
EHLO
commands that specify an
IP
address instead of a domain name\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
This setting may be used in combination with
opt BOFHCHECKHELO=1\&. The
BOFHCHECKHELO=1
check is disabled if SPF verification of the
HELO/EHLO
results in the SPF status of
\(lqpass\(rq\&. This makes sense: if the
HELO/EHLO
domains complies with the domain\*(Aqs SPF, it is not necessary to check it further\&.
.sp .5v
.RE
.RE
.PP
opt BOFHSPFMAILFROM=\fIkeywords\fR
.RS 4
Use Sender Policy Framework to verify the return address in the
MAIL FROM
command sent by the connecting SMTP client\&. See
Sender Policy Framework Keywords
below for a list of possible keywords\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
No SPF checking is done for if the
MAIL FROM
command specifies an empty return address (a bounce)\&. There\*(Aqs nothing to check\&.
.sp .5v
.RE
.RE
.PP
opt BOFHSPFFROM=\fIkeywords\fR
.RS 4
Use Sender Policy Framework to verify the return address in the
From:
header\&. See
Sender Policy Framework Keywords
below for important information, and a list of possible keywords\&.
.RE
.PP
opt BOFHSPFHARDERROR=\fIkeywords\fR
.RS 4
This setting lists the unacceptable SPF results that should result in a permanent error\&. All other unacceptable SPF results are kicked back with a temporary error indication, inviting the sender to try again later\&.
.sp
The default setting for
\fBBOFHSPFHARDERROR\fR
is
fail,softfail\&.
.RE
.PP
opt BOFHSPFTRUSTME=1
.RS 4
Disable all SPF checks for any connecting client that has relaying privileges (\fBRELAYCLIENT\fR
is explicitly set, or inherited after a successful SMTP authentication)\&.
.RE
.PP
opt BOFHSPFNOVERBOSE=1
.RS 4
This setting disables custom SPF rejection messages\&. Any SPF rejection message specified by the SPF policy is replaced by a stock, bland message\&. The author of this SPF implementation believes that there\*(Aqs a minor security issue with letting an external site control the error messages issued by your mail server\&. The same author does not believe that this is such a big deal, but security\-sensitive minds may choose to enable this setting, and sleep easy at night\&.
.RE
.PP
opt BOFHSUPPRESSBACKSCATTER=\fIlist\fR
.RS 4
This is one of the two settings that controls which messages are subject to backscatter suppression\&. The other setting,
ESMTP_BLOCKBACKSCATTER
is set in the
courierd
configuration file, which contains further documentation\&.
.sp
\(lqlist\(rq
is a comma\-separated list of message sources\&. The possible message sources are:
.PP
authsmtp
.RS 4
Messages received via
SMTP
from clients with relaying privileges (authenticated
SMTP, or
IP
addresses that always have relaying privileges\&.
.RE
.PP
smtp
.RS 4
All other messages received via
SMTP\&.
.RE
.PP
none
.RS 4
Do not suppress backscatter messages from any source\&.
.RE
.sp
The default setting is
\(lqopt BOFHSUPPRESSBACKSCATTER=smtp\(rq\&. The other possible values are
\(lqopt BOFHSUPPRESSBACKSCATTER=smtp,authsmtp\(rq
(which suppresses backscatter from all
SMTP
mail), and
\(lqopt BOFHSUPPRESSBACKSCATTER=none\(rq\&.
.RE
.RE
.PP
calendarmode
.RS 4
This configuration file enables basic calendaring features in the webmail server\&. Calendaring is currently considered experimental in nature, and the current implementation provides basic calendaring services\&. If this file does not exist, calendaring options are disabled\&. If this file exists it should contain a single word: "local"\&. For example:
.sp
.if n \{\
.RS 4
.\}
.nf
echo "local" >@sysconfdir@/calendarmode
.fi
.if n \{\
.RE
.\}
This configuration file must be globally readable, so make sure that your umask is not set too tight\&.
.RE
.PP
courierd
.RS 4
This configuration file specifies several parameters relating to general the
Courier
mail server configuration\&. A default configuration file will be installed, and you should consult its contents for additional information\&.
.RE
.PP
defaultdomain
.RS 4
This file contains one line whose contents is a valid mail domain\&. Most header rewriting functions will append
@defaultdomain
to all E\-mail addresses that do not specify a domain\&. If
defaultdomain
is missing, the
Courier
mail server uses the contents of the
me
control file\&.
.sp
When the ESMTP server receives a
\(lqRCPT TO\(rq
command containing the address
<user@[\fIip\&.address\fR]>, and the
IP
address is the same as the
IP
address of the socket it\*(Aqs listening on, the ESMTP server replaces the
IP
address with the contents of the
defaultdomain
control file\&. If
defaultdomain
is missing, the
Courier
mail server uses the contents of the
me
control file\&.
.sp
The contents of
defaultdomain
are also appended to return addresses to mail sent from the
Courier
mail server\*(Aqs webmail server, if they don\*(Aqt already have a domain\&. If
defaultdomain
does not exist, the
Courier
mail server\*(Aqs webmail server obtain the machine hostname, and uses that\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
The mail domain in
defaultdomain
should be one of the local domains, as defined by the
locals
and the
hosteddomains
control files\&.
.sp
Otherwise, if a domain\-less address in mail headers gets augmented with
defaultdomain
and the recipient replies to the message, upon receipt Courier won\*(Aqt recognize the recipient address as a local mailbox\&. This might not necessarily be wrong, but the consequences of such an action must be clearly understood\&.
.sp .5v
.RE
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBWarning\fR
.ps -1
.br
If you change the contents of this configuration file, it may be necessary to rerun the
\fBmakealiases\fR
command again, else your mail will promptly begin to bounce\&. If you don\*(Aqt have this configuration file defined, and you change the system\*(Aqs network host name, you may also need to run
\fBmakealiases\fR\&.
.sp .5v
.RE
.RE
.PP
dotextension
.RS 4
This file contains one line whose contents specify the name of dot\-files in users\*(Aq home directories which contain delivery instructions\&. If this file does not exist, the
Courier
mail server reads
$HOME/\&.courier,
$HOME/\&.courier\-foo,
$HOME/\&.courier\-default, and so on\&. If this file contains the text "qmail", the
Courier
mail server will instead read
$HOME/\&.qmail, $HOME/\&.qmail\-foo,
$HOME/\&.qmail\-default, and so on\&.
.RE
.PP
dsnfrom
.RS 4
This file contains one line specifying the contents of the
From:
header that the
Courier
mail server puts in all delivery status notifications\&. This file specifies a complete header, except for the "From: " part\&. If
dsnfrom
is missing, then the
Courier
mail server uses the following header:
"Courier mail server mail server at me" <@>
.RE
.PP
dsnlimit
.RS 4
Maximum size, in bytes, of a message whose contents are included in delivery status notifications\&. By default, the entire message is only included in non\-delivery notices (failures)\&. Only the headers will be returned for delay notifications (warnings) and return receipts; or for failures if the original message is larger than
dsnlimit\&. If missing,
dsnlimit
is set to 32K\&.
.sp
The sender can request that the entire message be returned even on delayed notices or return receipts, however the
Courier
mail server will ignore this request if the message size exceeds this limit\&.
.RE
.PP
enablefiltering
.RS 4
This configuration file enables the global mail filtering API for selected mail sources\&. This file, if it exists, contains a single line of text that specifies which kind of mail will be filtered\&. The possible values are:
.PP
esmtp
.RS 4
Enables global mail filtering for mail received via ESMTP\&.
.RE
.PP
local
.RS 4
Specifies that mail received from logged on users, via sendmail, and mail forwarded from
\m[blue]\fB\fBdot-courier\fR(5)\fR\m[]\&\s-2\u[4]\d\s+2
will be filtered using the global mail filtering API\&.
.RE
.PP
uucp
.RS 4
Specifies that mail received from UUCP will be filtered\&.
.RE
.sp
If you want to specify more than one source of mail, such as ESMTP and local mail, specify both
esmtp
and
local, separated by a space character\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
The global mail filtering API is described, in detail, in the
\m[blue]\fB\fBcourierfilter\fR(8)\fR\m[]\&\s-2\u[5]\d\s+2
manual page\&. This is NOT the traditional user\-controlled mail filtering, such as
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2\&. A global mail filter is a daemon process that selectively accepts or rejects incoming mail, based on arbitrary criteria\&.
.sp .5v
.RE
.RE
.PP
esmtpacceptmailfor
.RS 4
This file lists all domains that the
Courier
mail server accepts mail for via ESMTP\&. This file is in the same format as the
locals
file\&. If this file is missing, the
Courier
mail server uses the single domain specified in
me
(or the system machine name)\&.
.RE
.PP
esmtpacceptmailfor\&.dat
.RS 4
This is a binary database file that lists additional domains that the
Courier
mail server accepts mail for, just like
esmtpacceptmailfor\&. A binary database file will be faster than a flat text file when the number of domains is large\&. The
Courier
mail server will accept mail for domains listed in either
esmtpacceptmailfor
or
esmtpacceptmailfor\&.dat\&.
esmtpacceptmailfor\&.dat
is created by the
\fBmakeacceptmailfor\fR
command\&. You can use both
esmtpacceptmailfor\&.dat
and
esmtpacceptmailfor
at the same time\&. Put your most popular domains in
esmtpacceptmailfor, and put the rest of them into
esmtpacceptmailfor\&.dat\&.
.RE
.PP
esmtpauthclient
.RS 4
This configuration file configures ESMTP authentication for the ESMTP client\&. This is a text file of zero or more lines that contain the following fields:
.sp
.if n \{\
.RS 4
.\}
.nf
relay userid password
.fi
.if n \{\
.RE
.\}
When the
Courier
mail server connects to a remote ESMTP
relay, the
Courier
mail server will authenticate itself using
userid
and
password\&. These fields are separated by one or more whitespace characters\&. Because this file contains passwords, it must not be world or group readable, and owned by the user "@mailuser@"\&.
.sp
ESMTP negotiation will take place, and the
Courier
mail server will use a SASL authentication method supported by both the
Courier
mail server and the remote ESMTP server\&. Currently the
Courier
mail server supports PLAIN, LOGIN and CRAM\-MD5 authentication\&. CRAM\-MD5 is preferred over the other two, and PLAIN is preferred over LOGIN\&.
.sp
The
Courier
mail server also supports ESMTP over SSL (the ESMTP STARTTLS extension)\&. If ESMTP STARTTLS is enabled, STARTTLS will be used to establish a secure link first\&. The authentication will take place afterwards, over a secure channel\&.
.sp
Changes to this file take effect, more or less, immediately (existing connections are not affected, but new connections will read the updated data)\&.
.RE
.PP
esmtpd
.RS 4
This file is used to initialize the environment and parameters for
\fBcourieresmtpd\fR\&. A default file will be provided during installation\&. See the comments in the file for more information\&. For changes to this file to take effect you run the
\fBesmtpd stop\fR
command followed by
\fBesmtpd start\fR\&.
.RE
.PP
esmtpdelay
.RS 4
This file contains one line of text that specifies how long
\fBcourieresmtp\fR
waits after a failure to contact the remote mail server before another attempt is made\&.
\fBcourieresmtp\fR
(not to be confused with
\fBcourieresmtpd\fR) delivers outgoing mail to remote mail servers\&. The timeout is specified as an integral number, optionally followed by m \- minutes, or h \- hours\&. Otherwise it is specified in seconds\&.
.sp
The
\fBcourieresmtp\fR
process delivers mail that\*(Aqs routed to external mail relays, via ESMTP\&. When attempting to initally contact a mail server
\fBcourieresmtp\fR
waits for the amount of time specified by
esmtptimeoutconnect
(see below)\&.
esmtptimeoutconnect
is usually set to a relatively long period of time, in order to accomodate slow mail servers\&. A large number of messages queued up for an unreachable mail server can tie up delivery slots that can be put to a better use by reassigning them for mail to another domain\&. Although the
Courier
mail server does not usually assign all delivery slots for messages to the same domain (this is a tuneable parameter), it is still not very healthy to have a bunch of
\fBcourieresmtp\fR
daemons spinning their wheels, doing nothing\&.
.sp
The situation worsens when there is a large number of mail relays that accept mail for the same domain, and all of them are unreachable due to a network failure\&. That\*(Aqs because the
esmtptimeout
waiting period is used for each individual mail relay\&. Multiply
esmtptimeout
by the number of servers to see how large the delay really will be\&.
.sp
esmtpdelay
is implemented internally in the
\fBcourieresmtp\fR
module\&. The main the
Courier
mail server scheduling daemon is not aware of what\*(Aqs happening internally in
\fBcourieresmtp\fR\&. When
\fBcourieresmtp\fR
fails to contact any mail relay for the domain, the message is postponed, and the
esmtpdelay
timer is set\&. Any additional messages received by the same
\fBcourieresmtp\fR
daemon (for the same domain), are immediately postponed without any attempt to contact a remote mail relay\&. When the amount of time set by
esmtpdelay
expires,
\fBcourieresmtp\fR
will attempt to make another delivery attempt as usual\&.
.sp
If
esmtpdelay
does not exist, the default delay is five minutes\&. Any messages that are postponed look like any other temporary failure to
\fBcourierd\fR\&. Delivery attempts are rescheduled as if a real temporary failure took place\&. Therefore it does not make sense to set
esmtpdelay
to be greater than
retryalpha
(see below)\&. When
retryalpha
is smaller is
esmtpdelay, you\*(Aqll just messages spinning through the mail queue, with useless delivery attempts being attempted because
esmtpdelay
still hasn\*(Aqt expired\&.
.sp
Occasionally you might observe somewhat strange behavior on systems with heavy mail traffic\&.
esmtpdelay
applies separately to each individual instance of
\fBcourieresmtp\fR\&. When a remote mail server keeps going up and down, it is possible to end up with multiple
\fBcourieresmtp\fR
daemons handling mail for the same domain, but only some of them will encounter a network failure, purely by the luck of the draw\&. The remaining daemons will be able to establish a connection\&. So you\*(Aqll end up with some
\fBcourieresmtp\fR
daemons being able to deliver mail immediately, while the rest are still waiting patiently for
esmtpdelay
to expire, postponing all messages in the meantime\&. Some messages \- but not all \- will be immediately postponed without a delivery attempt, becauses they ended up getting to a daemon which is waiting for
esmtpdelay
to expire\&.
.sp
Another anomalous situation may happen when a
\fBcourieresmtp\fR
daemon gets reassigned to another domain, and then receives more mail for the previous domain\&. This can happen when you have a lot of mail going through\&. Although the
Courier
mail server tries to shuffle all mail for same domain into one pile, the scheduler still tries to dispatch mail on "first\-come, first\-serve" basis, as much as possible\&. When that happens another delivery attempt will be made immediately, because the previous
esmtpdelay
was cancelled when the daemon got reassigned to another domain\&.
.sp
There can also be occasional abnormalities that affect systems with light traffic\&. When there is a domain with several mail relays of equal priority, one mail relay is chosen at random for the connection attempt\&. If some of the equal\-priority mail relays are unreachable and a
\fBcourieresmtp\fR
daemon picks it, it will start the
esmtpdelay
timer and refuse to deliver any more mail until it expires, even if most of the mail servers are functional\&. This will happen only with mail relays of the lowest priority\&. Otherwise,
\fBcourieresmtp\fR
will always try to contact another mail relay of a still lower priority, before giving up and setting the
esmtpdelay
timer\&. Another
\fBcourieresmtp\fR
daemon will not be started for the same domain if there\*(Aqs already an existing one, so all delivery attempts will be turned away until
esmtpdelay
expires\&. Another
\fBcourieresmtp\fR
daemon will be started only in the event of multiple simultaneous delivery attempts that happen to coincide at the same time\&.
.sp
This is somewhat mitigated by the fact that all
\fBcourieresmtp\fR
daemons are killed after a short period of total inactivity (currently one minute), so that longer intervals specified by
esmtpdelay
are ignored\&. Note, however, that receiving a message to deliver, and then postponing it immediately, does count as some activity\&.
.sp
esmtpdelay
can be turned off by setting it to 0 seconds\&.
esmtpdelay
is designed for servers that handle heavy amount of mail that wish to avoid having outbound delivery slots tied up due to network failures, at an expense of an occasional anomalous behavior due to harmless paranoia\&.
esmtpdelay
may prove to actually make things worse for systems that carry only light mail traffic, if they are burdened with a task of exchanging mail primarily with external systems that are not properly maintained\&.
.RE
.PP
esmtpgreeting
.RS 4
The complete greeting banner displayed by
\fBcourieresmtpd\fR\&. Changes to this file take effect immediately\&.
.RE
.PP
esmtphelo
.RS 4
This file contains one line of text, what the
Courier
mail server calls itself in the
EHLO
or
HELO
command sent to a remote SMTP server\&.
me
is used if this file does not exist\&.
.sp
esmtphelo
may also be set to a special value of
\(lq*\(rq:
.sp
.if n \{\
.RS 4
.\}
.nf
echo \*(Aq*\*(Aq >esmtphelo
.fi
.if n \{\
.RE
.\}
(Note the single quotes, to prevent
\(lq*\(rq
from being expanded by the shell)\&. The
Courier
mail server will take the
IP
address of the local side of the connection to the remote SMTP server, look up the
IP
address in
DNS, and use the hostname from the reverse
DNS
lookup\&. This might be useful when the
Courier
mail server server is multihomed\&. The
Courier
mail server will look up the local
IP
address of each individual connection, and use that in its
EHLO
or
HELO
command\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
Functioning
DNS
is required\&. Using the
hosts
file, or an equivalent, won\*(Aqt work\&. This function uses the
Courier
mail server\*(Aqs native
DNS
resolver, which reads
/etc/resolv\&.conf
and queries the listed
DNS
servers directly\&.
.sp .5v
.RE
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
See
the section called \(lqServers with multiple IP addresses\(rq
for a better way of accomplishing the same results\&.
.sp .5v
.RE
.RE
.PP
esmtproutes
.RS 4
This file is used by the ESMTP module, and it contains one or more lines in the following form:
.sp
.if n \{\
.RS 4
.\}
.nf
\fIdomain\fR:\fIrelay\fR[,\fIport\fR][/SECURITY=STARTTLS][/SECURITY=REQUIRED][/SECURITY=SMTPS]
.fi
.if n \{\
.RE
.\}
\fIdomain\fR
is any SMTP domain\&.
\fIrelay\fR
specifies a fixed mail relay for this domain\&.
\fIrelay\fR
is optionally followed by a comma and a port number, to specify a port other than the default port 25\&. If an address\*(Aqs domain is not found in
esmtproutes, the
Courier
mail server looks for MX and A records as usual (and always delivers to port 25)\&. If the domain is found in
esmtproutes, however, any MX or A records for the domain are ignored; instead the
Courier
mail server delivers the message to the specified relay\&.
.sp
\fIrelay\fR
can be another domain, or an explicit
IP
address inside brackets\&. For example, if
esmtproutes
contains the following:
.sp
.if n \{\
.RS 4
.\}
.nf
example\&.com: relay\&.domain\&.com
domain\&.com: [192\&.168\&.0\&.2]
.fi
.if n \{\
.RE
.\}
Mail for
example\&.com
is delivered to
relay\&.domain\&.com, ignoring any MX records for
example\&.com\&. Mail for
domain\&.com
will be delivered to the machine at
IP
address 192\&.168\&.0\&.2\&. All other domains will have their MX and A records looked up\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
Unlike Qmail, the
Courier
mail server looks up MX and A records for
relay\&.example\&.com
(Qmail only looks up A records)\&.
.sp .5v
.RE
esmtproutes
may contain comments, any line that starts with the # character is ignored\&. Also, wildcards are allowed:
.sp
.if n \{\
.RS 4
.\}
.nf
 \&.example\&.com: [192\&.168\&.0\&.3],26
.fi
.if n \{\
.RE
.\}
This specifies that any address of the form
<anything@anything\&.example\&.com>
will be delivered to the mail server at this
IP
address, but on port 26\&.
.sp
esmtproutes
is read from top to bottom, stopping as soon as a first match is found\&.
.sp
domain
may be empty, this specifies a smarthost for all domains\&. For example, if
esmtproutes
contains the following text:
.sp
.if n \{\
.RS 4
.\}
.nf
example\&.com: relay\&.example\&.com
        :[192\&.168\&.0\&.4]
.fi
.if n \{\
.RE
.\}
This specifies that all mail to
example\&.com
is rerouted to
relay\&.example\&.com\&. All other mail is routed to the
IP
address
192\&.168\&.0\&.4\&.
.sp
If relay is empty, the
Courier
mail server interprets it as an explicit directive to use MX and A records from
DNS\&. For example:
.sp
.if n \{\
.RS 4
.\}
.nf
example\&.com:
:[192\&.168\&.0\&.4]
.fi
.if n \{\
.RE
.\}
This uses MX and A records for all messages to
example\&.com\&. All other mail is rerouted to the
IP
address
192\&.168\&.0\&.4\&.
.sp
The
/SECURITY=STARTTLS
flag indicates that mail to this domain will use the
SECURITY
ESMTP extension\&. See the
Courier
mail server installation notes for a description of
SECURITY, what it does, and how to configure it\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
/SECURITY=STARTTLS
does
\fInot\fR
refer to the standard implementation of
SMTP
over
TLS, but a
Courier\-specific extension\&.
Courier
automatically sends mail using encryption if it\*(Aqs enabled and the remote server advertises
STARTTLS\&.
.sp .5v
.RE
/SECURITY=SMTPS
uses an encrypted
SMTP
connection\&. This is an alternative to
STARTTLS\&. Encrypted
SMTP
uses a different port, port 465, which must be specified explicitly:
.sp
.if n \{\
.RS 4
.\}
.nf
: relay\&.example\&.com,465 /SECURITY=SMTPS
.fi
.if n \{\
.RE
.\}
This example forwards all mail to
relay\&.example\&.com
on port 465 using encrypted
SMTP\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
If you intend to use
/SECURITY=SMTPS
to forward all your mail to your provider\*(Aqs mail server over
smtps
additional you should also set
ESMTP_TLS_VERIFY_DOMAIN=1,
TLS_VERIFYPEER=PEER, and
TLS_TRUSTCERTS
to a list of trusted certificate authorities (Courier\*(Aqs configuration script should provide a default value for
TLS_TRUSTCERTS
on most platforms), in the
courierd
configuration file\&.
.sp
Otherwise,
TLS
still gets used to send mail, but the smarthost\*(Aqs certificate does not get validated\&. Properly\-managed Internet providers should install a valid certificate, signed by a trusted authority, if they require
SMTPS\&. Poorly\-managed Internet providers will just install a self\-signed certificate, and will not be able to explain why they require
SMTPS, if it\*(Aqs trivially compromised with a man\-in\-the\-middle attack that a non\-validated certificate enables, so either find a more competent provider, or use
/SECURITY=SMTPS
without actually enabling all the extra validation that\*(Aqs actually needed to gain any kind of a secure mail transmission channel\&.
.sp .5v
.RE
A combination of broken mail servers written by incompetent programmers, and poorly\-managed Internet providers will result in a mail server that advertises the ability to use an encrypted connection to receive mail, but either disconnect immediately, or return an error message when the sender takes up the receiver\*(Aqs offer to do so\&.
.sp
When the
Courier
mail server connects to another server that claims to support an encrypted connection, tries to enable it, then fails because the other mail server drops the connection or returns an error message, all subsequent connection attempts to the same mail server will ignore the server\*(Aqs false advertising, and proceed to send mail without attempting to enable encryption\&. The
Courier
mail server remembers not to use the encryption with this server for the next 2\-4 hours (depending on an internal log file\*(Aqs rotation schedule)\&. Once the remote mail server emerges from the penalty box, the next connection attempt will try again, and see if it\*(Aqs still doesn\*(Aqt work\&.
.sp
The
/SECURITY=REQUIRED
flag blocks the
Courier
mail server from sending mail to the remote server unless a standard encryped connection can get established\&. If it\*(Aqs known that the given mail server should only receive encrypted mail,
/SECURITY=REQUIRED
prevents a man\-in\-the\-middle attack where the remote mail server\*(Aqs advertisement of is
STARTTLS
capability gets suppressed, and the mail gets sent in the clear\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
ESMTP_TLS_VERIFY_DOMAIN=1,
TLS_VERIFYPEER=PEER, and
TLS_TRUSTCERTS
should also be set, in the
courierd
configuration file, as described above, for the same reasons, in this case\&.
.sp .5v
.RE
To summarize:
.PP
/SECURITY=STARTTLS
.RS 4
Courier\-specific extension, use a private certificate authority to set up a secure mail network, while supporting regular encrypted
TLS
with the rest of the world\&.
.RE
.PP
/SECURITY=SMTPS
.RS 4
Use regular encrypted
SSL/TLS
with this mail server\&. Use this flag with an
esmtproutes
entry to a server on port 465 (smtps)\&.
.RE
.PP
/SECURITY=REQUIRED
.RS 4
Must use the
STARTTLS
extension to open a regular encrypted
TLS
connection with this server on the regular SMTP port 25\&.
.RE
.sp
Changes to
esmtproutes
take effect immediately, more or less\&. Existing
\fBcourieresmtp\fR
processes that already have an established connection will ignore any changes\&.
.RE
.PP
esmtptimeout
.RS 4
This file contains one line of text that specifies the timeout for an SMTP command\&. The timeout is specified as an integral number, optionally followed by m \- minutes, or h \- hours\&. Otherwise it is specified in seconds\&. This timeout is used for all SMTP commands, unless the SMTP command has a dedicated timeout defined by a different configuration file\&. The default timeout is ten minutes\&.
.RE
.PP
esmtptimeoutconnect
.RS 4
This file contains one line of text that specifies the timeout for an SMTP connection attempt\&. Most
TCP/IP
stacks wait an extraordinary long period of time for SMTP connections to go through\&. This configuration setting limits the amount of time the
Courier
mail server waits for the SMTP connection to complete\&. The default timeout is one minute\&. Set
esmtptimeoutconnect
to 0 in order to use whatever default timeout your
TCP/IP
stack uses\&.
.RE
.PP
esmtptimeoutdata
.RS 4
This file contains one line of text that specifies the timeout for transferring the message contents or individual replies\&. The default timeout is five minutes\&. You WILL HAVE TO bump this up if you\*(Aqre on a slow link, and you want to send large messages\&. A 28\&.8Kbps link can be optimistically expected to push 3,000 bytes per second\&. With a five minute cutoff, you will not be able to send or receive anything larger than about 870 Kb\&. You have no business sending or receiving 870 Kb messagesl, if all you have is an analog 28\&.8Kbps connection\&.
.RE
.PP
esmtptimeouthelo
.RS 4
This file contains one line of text that specifies the timeout for the initial EHLO or HELO command\&. The
Courier
mail server will wait this amount of time to receive the initial greeting banner from the remote SMTP server, and a response to the subsequent EHLO/HELO command\&. The default value is 5 minutes\&.
.RE
.PP
esmtptimeoutkeepalive
.RS 4
This file contains one line of text that specifies how often outbound SMTP sessions are kept idle after delivering a message\&. After the
Courier
mail server connects to an SMTP server and completes the attempt to deliver the message, the SMTP session is kept idle for this time interval before being shut down\&. If the
Courier
mail server receives another message for the same domain, it will be delivered using the existing SMTP session, instead of establishing a new one\&. Note that some SMTP servers have a very short idle timeout, Qmail\*(Aqs is only two minutes\&. The default value is 60 seconds\&.
.sp
Note that there\*(Aqs also a separate limit to the maximum number of simultaneous SMTP sessions to the same domain\&. That limit is currently four, which is adequate for nearly every situation, so for now it will be set by an undocumented configuration file\&.
.RE
.PP
esmtptimeoutkeepaliveping
.RS 4
This file contains one line of text that specifies how often the
Courier
mail server will issue a useless RSET command when the connection is idle (see
esmtptimeoutkeepalive)\&. While waiting for any more messages to deliver to the same domain, or for the
esmtptimeoutkeepalive
interval to expire,
\fBcourieresmtp\fR
will transmit RSET commands at regular intervals specified by this configuration file\&. The default value is 0 seconds, which turns off the keepalive ping altogether\&. This configuration settings must be for a shorter time interval than
esmtptimeoutkeepalive
for it to make any sense\&. Note that other system administrators may consider this to be a very rude thing to do\&. Also keep in mind that this may generate quite a bit of idle traffic\&. If you have the
Courier
mail server configured for a maximum number of 200 outbound SMTP sessions and a 30 second
esmtptimeoutkeepaliveping
setting, then you can have as much as an average of around seven pings every second!
.RE
.PP
esmtptimeoutquit
.RS 4
This file contains one line of text that specifies how long the
Courier
mail server waits for the external SMTP server to acknowledge the QUIT command, before the
Courier
mail server unilaterally tears down the connection\&. The default value is 10 seconds\&. This must be a small value because the
Courier
mail server needs to be able to shut down quickly, on very short notice\&.
.RE
.PP
faxqueuetime
.RS 4
This file specifies how long the
Courier
mail server normally tries to repeatedly resend a fax message (if the
courierfax
module is enabled)\&. The default E\-mail message retry timeout (the
queuetime
setting) is one week, which is a reasonable timeout value for E\-mail messages (taking into account downed circuits, or crashed servers)\&. However, it doesn\*(Aqt make sense to keep trying to redeliver fax messages for a whole week\&.
.sp
faxqueuetime
specifies the timeout for fax messages\&. This time interval is specified in the same way as
queuetime
(see
queuetime
for more information)\&.
.RE
.PP
faxnotifyrc
.RS 4
This file specifies which mailbox the
Courier
mail server should deliver received faxes (if this option is enabled)\&. See the
Courier
mail server\*(Aqs installation notes for more information\&.
.RE
.PP
faxrc
.RS 4
This file configures the
Courier
mail server\*(Aqs outbound faxing and dialing parameters\&. Consult the comments in the default file for additional information, and the
\m[blue]\fB\fBcourierfax\fR(8)\fR\m[]\&\s-2\u[7]\d\s+2
manual page for more information\&.
.RE
.PP
hosteddomains
.RS 4
This file lists locally\-hosted domains\&. It is very similar in function to the
locals
control file\&. Any address with a domain listed in
hosteddomains
is considered to be a local address\&. The difference between
hosteddomains
and
locals
is that domains listed in
hosteddomains
are not removed from individual addresses before looking up the location of their mailboxes\&. For example, if the domain "example\&.com" appears in
locals, the address
user@example\&.com
will have
example\&.com
removed, and then the
Courier
mail server will look for a local mailbox named "user"\&.
.sp
If the domain "example\&.com" appears in
hosteddomains
instead, the
Courier
mail server will look for a local mailbox named "user@example\&.com" instead\&.
.sp
The contents of the
hosteddomains
configuration file is a list of domains, one per line, in lowercase\&. You must run the
\fBmakehosteddomains\fR
command, followed by
\fBcourier restart\fR
(this restarts the server) for any changes to take effect\&.
.sp
Additionally,
hosteddomains
can specify simple domain aliases\&. See the complete description in the
\m[blue]\fB\fBmakehosteddomains\fR(8)\fR\m[]\&\s-2\u[8]\d\s+2
manual page\&.
.RE
.PP
ipout, ip6out
.RS 4
Non\-default IP addresses to send outgoing ESMTP messages from\&. See
the section called \(lqServers with multiple IP addresses\(rq
and
the section called \(lqSimulating a server with multiple IP addresses\(rq, below, for more information\&.
.RE
.PP
ldapaddressbook
.RS 4
This file is used by the webmail server\&. It contain a default systemwide list of accessible LDAP address books\&. A default file will be installed, listing some common Internet address books\&. Each line in this file contains the following information:
.sp
.if n \{\
.RS 4
.\}
.nf
name<tab>host<tab>port<tab>suffix<tab>binddn<tab>bindpw
.fi
.if n \{\
.RE
.\}
"<tab>" is the ASCII tab character\&.
\(lqname\(rq
is the unique name for this LDAP server\&.
\(lqhost\(rq
and
\(lqport\(rq
specify the connection parameters\&.
\(lqsuffix\(rq
specifies the root LDAP entry whose subtree gets searched\&. The
\(lqbinddn\(rq
and
\(lqbindpw\(rq
fields are not presently used (they were used in earlier version of the webmail server, before the LDAP search interface was rewritten and simplified)\&.
.RE
.PP
ldapaliasrc
.RS 4
This file is used by the courierldapaliasd process\&. See
\m[blue]\fB\fBcourierldapaliasd\fR(8)\fR\m[]\&\s-2\u[9]\d\s+2
for more information\&.
.RE
.PP
locallowercase
.RS 4
If this file exists, the
Courier
mail server will not distinguish being lowercase and uppercase local accounts, so that
john@example\&.com
and
John@example\&.com
will refer to the same local mailbox (where
example\&.com
is your domain)\&.
Postmaster,
postmaster, and
POSTMASTER
always refer to the same account, even if
locallowercase
does not exist\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
If
locallowercase
exists you cannot have any system accounts that contain uppercase letters\&.
locallowercase
applies only to local mail\&. Mail addressed to external domains will always have the case of the addresses preserved\&.
.sp .5v
.RE
.RE
.PP
locals
.RS 4
This file contains one or more lines of text, where each line contains a valid mail domain\&. Any E\-mail address without
@domain, or with a domain that can be found in
locals
will be considered to be an address of a local mailbox\&. A domain can be specified with a leading dot:
.sp
.if n \{\
.RS 4
.\}
.nf
 \&.domain\&.com
.fi
.if n \{\
.RE
.\}
This is called a "wildcard"\&. Any domain ending in
domain\&.com, such as
a\&.domain\&.com,
b\&.domain\&.com,
a\&.b\&.c\&.domain\&.com
\- but NOT
somedomain\&.com
\- will be considered local\&. Note that
domain\&.com
is NOT included in this wildcard\&. Both "domain\&.com" and "\&.domain\&.com" should be listed\&.
.sp
Specific hosts can be excluded from the wildcard\&. Example:
.sp
.if n \{\
.RS 4
.\}
.nf
 !host\&.domain\&.com
 \&.domain\&.com
.fi
.if n \{\
.RE
.\}
anything\&.domain\&.com
is considered to be a local domain, except for
host\&.domain\&.com\&. Note that "!host\&.domain\&.com" must appear in
locals
before the
\&.domain\&.com
wildcard\&.
.sp
The "!hostname" syntax is also valid in the
esmtpacceptmailfor
control file\&.
.sp
If
locals
does not exist, the
Courier
mail server uses the contents of the
me
control file (note that
me
specifies only one domain, second and subsequent lines are ignored)\&. Also, see
hosteddomains\&.
.RE
.PP
localtimeout
.RS 4
This file specifies the watchdog timer for local mail deliveries\&. If a local mail delivery attempt does not complete in the proscribed time interval, the delivering process ID is killed\&. The time interval in
localtimeout
is specified in the same way as
queuetime
(see
queuetime
for more information)\&.
.RE
.PP
logindomainlist
.RS 4
If this file exists then the webmail login screen will have a drop\-down list whose contents will be read from this file\&. This file should contain a list of E\-mail domains, one per line\&. It should be created if the
Courier
mail server\*(Aqs webmail server is used to provide mail access for more than one domain\&. Instead of typing "user@domain" to log in, it will only be necessary to enter "user", and select the domain from the drop\-down list\&. If this file does not exist it will be necessary to enter the full E\-mail address into the webmail login screen\&.
The enhanced
logindomainlist
makes it possible to specify a separate list of domain for each virtual web site, and more control over the defaults\&.
.sp
What if you don\*(Aqt want to display a drop down menu? Administrators can now specify records that generate a hidden field in
login\&.html, or an editable text field, allowing sqwebmail to show only one mail login domain to each user per access
URL
or
IP
address\&. This functionality can greatly reduce confusion for first time webmail users, and greatly speed the login process for frequent webmail users\&.
.sp
Finally, the new
logindomainlist
file offers a new tool to ease maintenance\&. Administrators can now use wildcards to "rewrite" the domain portion of the access
URL
to the mail domain equivalent\&. For example, the following record can rewrite the
URL
"mail\&.*\&.com" to the mail domain "*\&.com"
.sp
*\&.com:mail\&.*\&.com:@
.sp
This powerful wildcard functionality can ease the login process for most of your server\*(Aqs mail domains with just one or two
logindomainlist
records\&.
.PP
File Format
.RS 4
Let\*(Aqs take a look at the NEW
logindomainlist
file format:
.sp
firstfield:secondfield:thirdfield
.sp
Above, we can see that the new
logindomainlist
records are made up of three fields delimited by colons\&. But what does each field do?
.sp
First Field
\- the first field contains the "mail domain" for which we would like the user to log in under\&. The mail domain is the part of an email address after the @ symbol\&. For example, in the email address "user@domain\&.com", "domain\&.com" is the mail domain\&.
.sp
Second Field
\- the second field contains the "access domain"\&. The access domain contains an
URL
or
IP
address that is used to figure out which mail domain to use by default\&. For example, in the following
logindomainlist
record:
.sp
domain1\&.com:domain2\&.com
.sp
"domain2\&.com" is the "access domain" and "domain1\&.com" is the "mail domain"\&. If the user logs into the following
URL:
.sp
http://domain2\&.com/cgi\-bin/sqwebmail
.sp
His default "mail domain" will be "domain1\&.com"\&.
.sp
Third Field
\- the third field may contain a modifier\&. The modifier may be either a single character modifier, or a group identification string\&. The single character modifiers and the group modifier are described in detail below\&.
.sp
Finally, the
logindomainlist
file may also contain comments and empty lines\&. Empty lines can be used to group records visually, and comments can be used to explain why a certain record or group of records look the way they do\&.
.sp
If the first character of a line is a \*(Aq#\*(Aq, then the entire line is considered a comment and is ignored\&. If the first character of a line contains whitespace, the entire line is assumed to be an empty line and is ignored\&.
.RE
.PP
Modifiers
.RS 4
@
\- the \*(Aq@\*(Aq modifier can be used to create a hidden field on the
login\&.html
page which contains the default mail domain\&. In addition, this field will automatically display the default mail domain in plain text to the right of the userid text box\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
The \*(Aq@\*(Aq modifier ALLOWS the use of wildcards to automate the relationship between "access domains" and "mail domains"\&. See the heading "\fIWildcards\fR" below for more information about wildcarding\&.
.sp .5v
.RE
\-
\- the \*(Aq\-\*(Aq modifier can be used to create an editable text field on the
login\&.html
page which contains the default mail domain\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
The \*(Aq\-\*(Aq modifier ALLOWS the use of wildcards to automate the relationship between "access domains" and "mail domains"\&. See the heading "\fIWildcards\fR" below for more information about wildcarding\&.
.sp .5v
.RE
group string
\- If no modifier is specified in the third field, or if the third field modifier is a group identifier string, then a drop down menu will be displayed on the
login\&.html
page\&. Records with the SAME group string will be displayed together in the drop down\&. For example, if your
logindomainlist
file contains the following records:
.sp
.if n \{\
.RS 4
.\}
.nf
     domain1\&.com:domain2\&.com:firstgroup
     domain3\&.com:domain4\&.com:firstgroup
     domain5\&.com:domain6\&.com:firstgroup
     domain7\&.com:domain8\&.com:secondgroup
     domain9\&.com:domain10\&.com:secondgroup
.fi
.if n \{\
.RE
.\}
And the user logs into sqwebmail with the following
URL:
.sp
http://domain4\&.com/cgi\-bin/sqwebmail
.sp
He will see a drop down containing ONLY the following domains:
.sp
.if n \{\
.RS 4
.\}
.nf
     domain1\&.com
     domain3\&.com
     domain5\&.com
.fi
.if n \{\
.RE
.\}
"domain3\&.com" will be automatically selected, or defaulted\&. Only the records in the
firstgroup
will be visible to the user\&. This functionality is great for organizations with more than one mail domain\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
The group string modifier does NOT allow the use of wildcards to automate the relationship between "access domains" and "mail domains"\&. This is because drop down menus are fundamentally incompatible with wildcards\&.
.sp .5v
.RE
.RE
.PP
Wildcards
.RS 4
If a record\*(Aqs modifier allows wildcarding (See "\fIModifiers\fR" above for information about which modifiers allow wildcarding and which do not\&.) then the first and second fields of that record _MAY_ contain wildcards\&. Wildcards match against the HTTP_HOST CGI environment variable only\&.
IP
addresses can NOT be used if either the first or second fields contain the wildcard character\&. However, if neither the first nor second fields contain the wildcard character, then the second field can contain an
IP
address\&.
.sp
In the
logindomainlist
file, an asterisk (*) character in either the first and/or second field represents a wildcard\&. Any asterisk in the second field will be used to match an access domain\&. If an asterisk exists in the first field then any characters which the asterisk in the second field represents will replace the asterisk in the first field when sqwebmail determines the default mail domain\&. However, asterisks are not required in either the first or second fields\&. They are totally optional\&. For example, given the following
logindomainlist
record:
.sp
*\&.com:mail\&.*\&.com:@
.sp
If the user logs into sqwebmail with the following
URL:
.sp
http://mail\&.mydomain\&.com/cgi\-bin/sqwebmail
.sp
The asterisk in the second field will represent the string "mydomain"\&. This string will then replace the asterisk in the first field to give the following default mail domain:
mydomain\&.com
.sp
Similarly, if the following record exists in the
logindomainlist
file:
.sp
*:*:@
.sp
Then ANY
URL
the user uses to access sqwebmail will be automatically used for the default mail domain\&.
.sp
But the first field doesn\*(Aqt _HAVE_ to contain an asterisk\&. The following will work just fine:
.sp
mydomain\&.com:mydomain\&.*:@
.sp
The above example will allow the user to access the "mydomain\&.com" mail domain from any of the following
URLs: "mydomain\&.org", "mydomain\&.net", "mydomain\&.us", etc\&.\&.\&.
.sp
And finally, the first field doesn\*(Aqt have to contain anything at all! If the first field is empty, that record will serve as an explicit no\-default mail domain\&. No default mail domain will be specified if the second field matches the user\*(Aqs login
URL\&. This is useful because the
logindomainlist
is searched from the top down\&. Any wildcard records at the bottom of the list will be overridden by records closer to the top\&. An "explicit no\-default" record can be used to specify certain domains as "system account" domains so that no default mail domain is specified\&.
.RE
.RE
.PP
maildirfilterconfig
.RS 4
This file, if exists, sets the global defaults for mail filtering in the webmail server\&. Mail filtering in the webmail server is a subject worthy of special mention\&. A full description of how to install and configure webmail\-based mail filtering is included in the installation notes for the
Courier
mail server\&. Refer to the installlation instructions for additional information\&.
.RE
.PP
maildirshared
.RS 4
This file, if exists, specifies the location of shared maildirs for the webmail and IMAP server\&. Normally, each mailbox must be separately configured to access every shared maildir, by the
\m[blue]\fB\fBmaildirmake\fR(1)\fR\m[]\&\s-2\u[10]\d\s+2
command\&. This file allows shared maildirs to be set globally for everyone\&. Everyone\*(Aqs webmail and IMAP server will pick up the shared maildirs specified in this file\&. See
\m[blue]\fB\fBmaildirmake\fR(1)\fR\m[]\&\s-2\u[10]\d\s+2
for more information\&.
.RE
.PP
maildrop
.RS 4
This file contains one line whose contents is a pathname to the
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
mail delivery agent\&. If the
Courier
mail server knows that the delivery agent used to delivery mail locally is
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
then certain delivery optimizations are possible\&. This configuration file does NOT actually specify that
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
should be used as a local mail delivery agent, it only specifies where
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
is installed\&. The default local mail delivery instructions are specified in the
courierd
configuration file\&. If the specified delivery instruction specify running an external program whose pathname matches the one specified by this configuration file, the
Courier
mail server assumes that it\*(Aqs
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2, and will use maildrop\-specific options to optimize mail delivery\&.
.sp
This configuration file is initialized, by default, to point to the version of
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
that\*(Aqs integrated with the
Courier
mail server\&. The integrated version of
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
is configured slightly differently than the standalone version of
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2\&.
.sp
Although you can set the
maildrop
configuration file to point to some other version of the
\fBmaildrop\fR
mail filter, you MUST set the
maildropfilter
configuration file (see below), to point to the integrated version of
\fBmaildrop\fR\&.
.RE
.PP
maildropfilter
.RS 4
This file contains one line whose contents is a pathname to the
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
mail delivery filter\&. In addition to being a delivery agent, maildrop can also be used as a mail filtering engine\&. If this file exists, the
Courier
mail server will be capable of invoking recipient\-specified mail filters when a message is received\&. If the mail filtering rules reject the message, the
Courier
mail server will not accept the message for delivery\&. This means that when receiving mail via ESMTP, the
Courier
mail server will reject the ESMTP transaction without even accepting the message from the remote mail server\&.
.sp
This file is not installed by default\&. To activate mail filtering for local recipients, simply copy the contents of the
maildrop
configuration file to
maildropfilter\&.
.RE
.PP
maildroprc
.RS 4
This file contains systemwide mail filtering instructions for
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
deliveries\&. This configuration file is optional, and is used by
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2
when it is invoked as a traditional post\-delivery mail filter\&. See
\m[blue]\fB\fBmaildropfilter\fR(6)\fR\m[]\&\s-2\u[11]\d\s+2
for more information\&.
.RE
.PP
me
.RS 4
This file contains one line whose contents is a valid machine name\&. When a single installation of the
Courier
mail server is shared over a network, each machine that\*(Aqs running the
Courier
mail server must have a unique
me
file\&. If me is missing, The
Courier
mail server uses the result of the
\fBgethostname\fR() system call\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBWarning\fR
.ps -1
.br
If you change the contents of this configuration file, it may be necessary to rerun the
\fBmakealiases\fR
command again, else your mail will promptly begin to bounce\&. If you don\*(Aqt have this configuration file defined, and you change the system\*(Aqs network host name, you may also need to run
\fBmakealiases\fR\&.
.sp .5v
.RE
.RE
.PP
msgidhost
.RS 4
If a message does not have a
Message\-ID:
header, the
Courier
mail server may decide to create one\&. The host portion of the new header will be set to the contents of
msgidhost, which contains one line of text\&. If
msgidhost
does not exist,
me
will be used in its place\&. Changes to this file take effect immediately\&.
.RE
.PP
nochangingfrom
.RS 4
The
Courier
mail server\*(Aqs webmail server lets the contents of the
From:
header be set for mailed messages\&. If this configuration file exists, the ability to set the contents of the
From:
header is disabled\&.
.RE
.PP
queuelo, queuehi, queuefill
.RS 4
These configuration settings tune the
Courier
mail server\*(Aqs mail queue processing\&. The
Courier
mail server does not load the entire mail queue metadata in memory\&.
queuelo
contains a number that specifies the queue
\(lqlow watermark\(rq
message count\&.
queuehi
contains a number that specifies the queue
\(lqhigh watermark\(rq
message count\&.
queuefill
specifies a time interval,
\(lqqueue refill\(rq
in seconds\&. The number in
queuefill
may optionally be followed by "m", indicating that the queue refill is specified in minutes\&.
.sp
queuehi
specifies the maximum number of messages that are loaded into memory\&. The
Courier
mail server reads the mail queue on disk until either it reads all of it, or it reads the number of messages specified by
queuehi\&. As messages are delivered they are removed from the memory and disk\&. Messages that are deferred for another delivery attempt are removed from memory, but kept on the disk\&.
.sp
When the number of messages in memory falls below
queuelo, The
Courier
mail server goes back to disk and attempts to fill the memory queue to the top, again\&.
.sp
This is, basically, a capsule summary of the mail queue processing logic\&. Many small, low level details are omitted; this is just an executive overview\&. When new messages arrive during a large mail backlog, the new messages are also loaded into the memory queue, if there\*(Aqs room for them\&. Therefore, during a large mail backlog the
Courier
mail server simultaneously tries to clear the existing backlog, and process any new mail at the same time\&. Up to the
Courier
mail server 0\&.41, all of this generally translates to the
Courier
mail server giving priority to newly arrived mail, and processing the backed up mail queue if spare resources are available\&.
.sp
The
queuefill
setting was added in the
Courier
mail server 0\&.42, in an attempt to keep new mail from excessively delaying existing mail during a major queue backup\&.
queuefill
specifies a time interval\&. When the
Courier
mail server completely fills the memory queue it sets a timer\&. After the interval given by
queuefill
The
Courier
mail server will go back and re\-fill the mail queue even if the number of messages did not fall below the low watermark\&. If the
Courier
mail server finds older messages in the mail queue they will be pushed to the top of the scheduling queue, and given priority\&.
.sp
Smaller
queuefill
time intervals means more frequent trips to the disk, and more overhead\&. But, in exchange for that, during a mail backlog the
Courier
mail server will spend more time handling a greater number of delayed messages\&. Larger
queuefill
time intervals means less frequent trips to the disk, and less overhead, in exchange for less "fairness" during large mail backlogs\&.
.sp
queuefill
defaults to five minutes, if not specified\&. Explicitly setting it to 0 seconds turns off the queue re\-filling completely, essentially reverting to pre\-0\&.42 behavior\&. The default
queuelo
and
queuehi
values are computed at run time\&.
queuelo
defaults to the larger of 200, and the sum total of configured mail delivery slots, both local and remote\&.
queuehi, if not explicitly set, defaults to the smaller of twice the
queuelo, or
queuelo
plus 1000\&.
.RE
.PP
queuetime
.RS 4
This file specifies how long the
Courier
mail server normally tries to repeatedly deliver a message, before giving up and returning it as undeliverable\&. Messages are immediately returned as undeliverable when a permanent failure is encountered (such as the recipient address not being valid)\&. Attempts to deliver the message when there\*(Aqs a temporary, transient, error (such as the network being down) will be repeatedly made for the duration of time specified by this configuration file\&. This file contains a number followed by the letter \*(Aqw\*(Aq for weeks, or \*(Aqd\*(Aq for days\&. It is also possible to use \*(Aqh\*(Aq for hours, \*(Aqm\*(Aq for minutes, or \*(Aqs\*(Aq for seconds\&. Only integers are allowed, fractions are prohibited\&. However, you can use \*(Aq1w2d\*(Aq to specify one week and two days\&. If
queuetime
is missing, the
Courier
mail server makes repeated delivery attempts for one week\&.
.RE
.PP
retryalpha, retrybeta, retrygamma, retrymaxdelta
.RS 4
These control files specify the schedule with which the
Courier
mail server tries to deliver each message that has a temporary, transient, delivery failure\&.
retryalpha
and
retrygamma
contain a time interval, specified in the same way as
queuetime\&.
retrybeta
and
retrymaxdelta
contain small integral numbers only\&.
.sp
The
Courier
mail server will first make
retrybeta
delivery attempts, waiting for the time interval specified by
retryalpha
between each attempt\&. Then, the
Courier
mail server waits for the amount of time specified by
retrygamma, then the
Courier
mail server will make another
retrybeta
delivery attempts,
retryalpha
amount of time apart\&. If still undeliverable, the
Courier
mail server waits
retrygamma*2 amount of time before another
retrybeta
delivery attempts, with
retryalpha
amount of time apart\&. The next delay will be
retrygamma*4 amount of time long, the next one
retrygamma*8, and so on\&.
retrymaxdelta
sets the upper limit on the exponential backoff\&. Eventually the
Courier
mail server will keep waiting
retrygamma*(2^retrymaxdelta) amount of time before making
retrybeta
delivery attempts
retryalpha
amount of time apart, until the
queuetime
interval expires\&.
.sp
The default values are:
.PP
retryalpha
.RS 4
Five minutes
.RE
.PP
retrybeta
.RS 4
Three times
.RE
.PP
retrygamma
.RS 4
Fifteen minutes
.RE
.PP
retrymaxdelta
.RS 4
Three
.RE
.sp
This results in the
Courier
mail server delivering each message according to the following schedule, in minutes: 5, 5, 5, 15, 5, 5, 30, 5, 5, 60, 5, 5, then repeating 120, 5, 5, until the message expires\&.
.RE
.PP
sizelimit
.RS 4
Maximum size of the message, in bytes, that the
Courier
mail server accepts for delivery\&. The
Courier
mail server rejects larger messages\&. If
sizelimit
is set to zero, The
Courier
mail server accepts as large message as available disk space permits\&. If the environment variable
\fBSIZELIMIT\fR
is set at the time a new message is received, it takes precedence and the
Courier
mail server uses the contents of the environment variable instead\&. Changes to this file take effect immediately\&. The
\fBSIZELIMIT\fR
environment variable is for use by individual mail submission agents\&. For example, it can be set by the
smtpaccess
configuration file (see
\m[blue]\fB\fBmakesmtpaccess\fR(8)\fR\m[]\&\s-2\u[3]\d\s+2
for more information) for mail from certain
IP
addresses\&.
.sp
If
sizelimit
does not exist, and
\fBSIZELIMIT\fR
is not set, the maximum message size defaults to 10485760 bytes\&.
.RE
.PP
submitdelay
.RS 4
submitdelay
specifies the delay before the first delivery attempt for a message that has been entered into the mail queue\&. Normally, the first delivery attempt is made as soon as possible\&. This setting delays the initial delivery attempt\&. It is normally used when you have a mail filter installed that detects duplicate messages arriving in a short period of time\&. If the mail filter detects this situation it can use the
\m[blue]\fB\fBcancelmsg\fR(1)\fR\m[]\&\s-2\u[12]\d\s+2
command to reject duplicate messages in the queue (and return them back to the envelope sender)\&.
.sp
submitdelay
specifies a time interval in the same format as
queuetime\&.
.RE
.PP
usexsender
.RS 4
If this configuration file exists, the
Courier
mail server\*(Aqs webmail server will set the
X\-Sender: header
on all outgoing messages\&. This is a good idea if the webmail server allows the user to set the contents of the
From:
header\&. Note that the
Courier
mail server records the system userid of the sender in all locally\-sent messages (which includes messages mailed by the webmail server), which is sufficient in most cases\&. In cases where you have many virtual accounts that share the same system userid, this configuration file provides a way to positively identify the sender of the outgoing message\&.
.RE
.PP
uucpme
.RS 4
uucpme
sets the UUCP nodename of the
Courier
mail server mail relay\&. See
\m[blue]\fB\fBcourieruucp\fR(8)\fR\m[]\&\s-2\u[13]\d\s+2
for more information\&.
.RE
.PP
uucpneighbors
.RS 4
uucpneighbors
is used by the
\fBcourieruucp\fR
module to specify the
Courier
mail server\*(Aqs configuration for relaying mail via UUCP\&. See
\m[blue]\fB\fBcourieruucp\fR(8)\fR\m[]\&\s-2\u[13]\d\s+2
for more information\&.
.RE
.PP
uucprewriteheaders
.RS 4
If this file exists, headers of messages sent to/from UUCP addresses will be rewritten\&. Normally, only the message envelope sender and recipients are rewritten, the existence of this file causes the headers to be rewritten as well\&.
.RE
.PP
vhost\&.\fIip\-address\fR, vhost\&.\fIdomain\fR
.RS 4
Enable per\-message virtual configuration settings described in
the section called \(lqServers with multiple IP addresses\(rq
and
the section called \(lqSimulating a server with multiple IP addresses\(rq, below, for more information\&.
.RE
.PP
warntime
.RS 4
warntime
specifies an amount of time in the same format as
queuetime\&. If a message still has not been delivered after this period of time, the
Courier
mail server sends a warning message (a "delayed" Delivery Status Notification) to the sender\&. If
warntime
is missing, the
Courier
mail server sets
warntime
to four hours\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
The time interval specified by
warntime
is only approximate\&. The
Courier
mail server sends a delayed Delivery Status Notification at the conclusion of the first attempted delivery after
warntime
has elapsed\&.
.sp .5v
.RE
.RE
.SS "Webmail template files"
.PP
HTML output from the webmail server is generated from the template files in
@datadir@/sqwebmail/html/en\-us\&. It is possible to translate the webmail interface into another language simply by creating another subdirectory underneath
@datadir@/sqwebmail/html, then meticulously translating each
\&.html
file\&. Each template file contains well\-formed HTML, with dynamic content marked off by tags\&. Note that the large comment blocks in each HTML file need to be translated too, since they are inserted as dynamic content, elsewhere\&.
.PP
The directory
@datadir@/sqwebmail/html/en\-us
also contains several configuration files, in addition to the HTML template files\&. Doing so allows this configuration information to be defined for each available language\&.
.PP
CHARSET
.RS 4
This file consists of a single line of text, which names the character set used by the HTML template files\&. It is possible to specify multiple character set, by separating them with commas, provided that HTML templates use only the common portions of all listed character set\&.
.sp
The default English HTML templates use strictly the
\(lqus\-ascii\(rq
subset, and the
CHARSET
contains
utf\-8,iso\-8859\-1\&. When multiple character sets are listed, the first character set that\*(Aqs supported by the browser is picked, so with UTF\-8 capable browsers the default webmail interface will use
UTF\-8, falling back to
ISO\-8859\-1
for browsers that do not support
UTF\-8\&.
.RE
.PP
footer
.RS 4
The contents of this file, if it exists, are appended to all messages sent by the webmail server\&.
.RE
.PP
ISPELLDICT
.RS 4
This file consists of a single line of text, which contains the name of the dictionary used for spell\-checking\&. It is passed as an argument to
\fBispell\fR, or
\fBaspell\fR\&.
.RE
.PP
LANGUAGE
.RS 4
This file consists of a single line of text, which should always be the same as the name of its directory (en\-us)\&.
.RE
.PP
LANGUAGE_PREF
.RS 4
This file is not needed at runtime, its contents are used during installation\&. See
webmail/html/README_LANG
in the source distribution for more information\&.
.RE
.PP
LOCALE
.RS 4
The corresponding C locale for these templates\&.
.RE
.PP
TIMEZONELIST
.RS 4
This file lists the available timezones on the login screen\&. See the comments in this file for more information\&.
.RE
.SS "Sender Policy Framework Keywords"
.PP
The
Courier
mail server can perform
\(lqSender Policy Framework\(rq
checks on up to three addresses for each message\&. This is controlled by setting the following variables:
\fBBOFHSPFHELO\fR,
\fBBOFHSPFMAILFROM\fR, and
\fBBOFHSPFFROM\fR\&. Each variable is set to a comma\-separated list of the following keywords:
\(lqoff\(rq
\- SPF verification disabled (default);
\(lqnone\(rq,
\(lqneutral\(rq,
\(lqpass\(rq,
\(lqfail\(rq,
\(lqsoftfail\(rq,
\(lqerror\(rq,
\(lqunknown\(rq
\- these keywords correspond to the possible results of an SPF check, the message is accepted for the listed SPF results only, any other SPF result is rejected;
\(lqall\(rq
\- shorthand for all possible SPF results, use
\(lqall\(rq
to run SPF in informational mode only, recording the SPF status in the
Received\-SPF:
header;
\(lqallowok\(rq
\- automatically pass the SPF verification if the sender\*(Aqs IP address is found in a DNS access whitelist, any whitelist given in the
\fB\-allow\fR
option to
\fBcouriertcpd\fR, see the
\(lqDNS ACCESS LISTS\(rq
section in
\m[blue]\fB\fBcouriertcpd\fR(1)\fR\m[]\&\s-2\u[14]\d\s+2\&.
.PP
A rejected SPF result gets kicked back with a permanent error indication if the SPF result is listed in
\fBBOFHSPFHARDERROR\fR, and a temporary error indication otherwise\&.
.PP
When enabling SPF checking, the keyword list should always include
\(lqpass\(rq
(it makes no sense to do otherwise) and
\(lqnone\(rq\&. The keyword list should also include
\(lqsoftfail\(rq,
\(lqneutral\(rq, and
\(lqunknown\(rq\&. See the SPF draft for a description of these status results\&. At some distant future, the keyword list will only include
\(lqpass\(rq, rejecting all senders without a stated policy\&. This might be desirable at some point in the future, but not right now\&.
.PP
The
\fBBOFHSPFFROM\fR
list may also include an additional keyword,
\(lqmailfromok\(rq\&.
\fBBOFHSPFMAILFROM\fR
and
\fBBOFHSPFFROM\fR
are trade\-offs\&. Using
\fBBOFHSPFMAILFROM\fR
is faster, and it does not require the entire message to be received, before running the SPF check\&.
\fBBOFHSPFFROM\fR
checking can only occur after the entire message is received, but it\*(Aqs more reliable\&. If
\(lqmailfromok\(rq
is listed, the
From:
is not checked if the
MAIL FROM
command was checked with the
\(lqpass\(rq
result\&.
.PP
In other words: the
From:
header is checked if
MAIL FROM
was empty, or did not pass the SPF checks\&. If
MAIL FROM
passed the SPF check the
Courier
mail server won\*(Aqt bother looking at the
From:
header\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.PP
A conservative policy should not reject failed SPF checks from the
From:header, because it can be counterproductive in some situations\&. This is because when a sender from a domain with a published SPF policy sends a message to a mailing list, the message goes through the mailing list processor\*(Aqs
IP
address, and it will fail the SPF check unless the domain SPF explicitly authorizes the mailing list processor\*(Aqs
IP
address\&.
.PP
This is very unlikely\&. The end result is that domains with a published SPF record get punished, and domains without an SPF record get off scott free\&. Mailing lists should be encouraged to publish their own SPF records for mailing list traffic; then the
\(lqmailfromok\(rq
keyword can validate the mailing list\*(Aqs return address, and forego checking of the
\(lqFrom:\(rq
header from the mailing list, while still checking the
\(lqFrom:\(rq
header from everyone else\&.
.PP
Another alternative is to use
\fBopt BOFHSPFFROM=all\fR
for advisory purposes only\&. Post\-delivery mail filters can key off the
\(lqReceived\-SPF\(rq
header\&.
.sp .5v
.RE
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.PP
The
Courier
mail server can add up to three
\(lqReceived\-SPF\(rq
headers of its own, one for each SPF check\&. The
Courier
mail server renames any existing
\(lqReceived\-SPF\(rq
header as
\(lqOld\-Received\-SPF\(rq\&. All
\(lqReceived\-SPF\(rq
headers delivered to a local mailbox will always come from the
Courier
mail server\&.
.sp .5v
.RE
.SS "Servers with multiple IP addresses"
.PP
The
Courier
mail server\*(Aqs default configuration listens on port 25 on all IP addresses\&. If the server has more than one IP address,
Courier
accepts connections on any IP address\&. Adjust the settings in the
esmtpd
configuration file to explicitly list which IP addresses
Courier
should listenson\&. This also applies to the ESMTP over SSL server on port 465 configured by
esmtpd\-ssl, and the
MSA
server on port 587, configured by
esmtpd\-msa\&.
.PP
That\*(Aqs for incoming EMSTP\&. For outgoing ESMTP connections, the
Courier
mail server does not specify an IP address by default, and lets the server select one\&. The server selects a default IP address based on a server\*(Aqs network configuration\&. The selection criteria is platform specific, and is typically based on the system\*(Aqs IP routing tables\&.
.PP
The
ipout
and
ip6out
configuration files set an explicit IP address for
Courier\*(Aqs outgoing connections:
.sp
.if n \{\
.RS 4
.\}
.nf
# echo "192\&.168\&.0\&.1" >@sysconfdir@/ipout
# echo "fec0::230:48ff:fec4:429c" >@sysconfdir@/ip6out
.fi
.if n \{\
.RE
.\}
.PP
This example specifies
192\&.168\&.0\&.1
as the IP address to make connections from for IPv4 destinations, and
fec0::230:48ff:fec4:429c
for IPv6 destinations\&.
.PP
If the
Courier
mail server runs on a host with two IPv4 addresses,
192\&.168\&.0\&.1,
192\&.168\&.1\&.1, the above example uses
192\&.168\&.0\&.1
to send the relayed message to IPv4 destinations even if
Courier
received the message from a client that connected to the other addresses\&.
.PP
If the
Courier
mail server accepts an ESMTP connection and a message from an authenticated client with relaying privileges, in a smarthost role, and forwards the message via ESMTP,
Courier
normally uses the server\*(Aqs default IP address, or the one set by
ipout
or
ipout6\&. When the
Courier
mail servers runs on more than one IP address, it\*(Aqs possible to selectively set the outgoing IP address based on which one of those IP addresses the message was received at\&. A simple, basic configuration forwards the message from the same IP addresses it was received from, but it doesn\*(Aqt have to be, it can be a different one\&.
.PP
The first step is to enable a per\-message, non\-default configuration settings, like the outgoing IP address, by creating a zero\-length
vhost\&.\fIip\-address\fR
file:
.sp
.if n \{\
.RS 4
.\}
.nf
# touch >@sysconfdir@/vhost\&.192\&.168\&.0\&.1
# touch >"@sysconfdir@/vhost\&.fec0::230:48ff:fec4:429c"
.fi
.if n \{\
.RE
.\}
.PP
This enables non\-default settings for messages received from a client that connects to one of these IP addresses\&. These two IP addresses (one IPv4 and one IPv6 address) are, presumably, two of the server\*(Aqs IP addresses\&. This is not a client\*(Aqs IP address, these are the server\*(Aqs IP addresses\&. These may be the only two IP addresses the server has, or the server can have more IP addresses, but these are the only two IP addresses for which custom settings get enabled\&.
.PP
One such custom setting would be a different IP address for outgoing connections depending on the IP address of the connection the message was originally received from:
.sp
.if n \{\
.RS 4
.\}
.nf
# echo "192\&.168\&.0\&.1" >@sysconfdir@/ipout\&.192\&.168\&.0\&.1
# echo "192\&.168\&.1\&.1" >@sysconfdir@/ipout\&.192\&.168\&.1\&.1
.fi
.if n \{\
.RE
.\}
.PP
\(lqipout\&.\fIaddress\fR\(rq
sets the IP address for outgoing connections for messages received from a client connection to
\(lq\fIaddress\fR\(rq
only\&. Just an
ipout
applies to all other messages, except ones which have an
ipout\&.\fIaddress\fR
in existence\&. The above example specifies that, on a server with these two IP addresses, messages received from a client that\*(Aqs connected to either IP address get forwarded (from a client that normally authenticates and receives relaying privileges) using a connection from the same IP address\&. If the server has any other IP addresses, the IP address in
ipout
takes effect (or the default system\-specified IP address)\&.
.PP
For convenience, an empty
ipout\&.\fIaddress\fR
gets interpreted as if it contains the same
\fIaddress\fR\&. The above example is equivalent to:
.sp
.if n \{\
.RS 4
.\}
.nf
# touch @sysconfdir@/ipout\&.192\&.168\&.0\&.1
# touch @sysconfdir@/ipout\&.192\&.168\&.1\&.1
.fi
.if n \{\
.RE
.\}
.PP
The formal configuration rules are as follows, for a message received from IP address
\(lq\fIaddress\fR\(rq, which may be an IPv4 or an IPv6 address:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
The IPv4 address and the IPv6 address for outgoing ESMTP connections get specified by the contents of
@sysconfdir@/ipout\&.\fIaddress\fR
and
@sysconfdir@/ip6out\&.\fIaddress\fR, respectively\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If the file exists, but is empty, the same
\fIaddress\fR
becomes the IP address for the outgoing connection\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
The above rules are in effect only if
@sysconfdir@/vhost\&.\fIaddress\fR
exists,
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If the file does not exist, or if
@sysconfdir@/vhost\&.\fIaddress\fR
does not exist, the contents of
@sysconfdir@/ipout, for IPv4 connections, and
@sysconfdir@/ip6out, for IPv6 connections set the IP address\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Otherwise, the
Courier
mail server uses the default IP address determined by the system\*(Aqs network configuration\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
In
@sysconfdir@/ipout\&.\fIaddress\fR
and
@sysconfdir@/ip6out\&.\fIaddress\fR, an address of "0" also specifies the system\*(Aqs default IP address\&.
.RE
.PP
It is possible for the
Courier
mail server to receive a message from an IPv6 connection, and forward it to an IPv4 address, or vice versa\&. The
\fIaddress\fR
portion of
@sysconfdir@/ipout\&.\fIaddress\fR
and
@sysconfdir@/ip6out\&.\fIaddress\fR, specifies the IP address the client used to connect to
Courier
and may be either an IPv4 or an IPv6 address, in both cases! For example:
.sp
.if n \{\
.RS 4
.\}
.nf
# echo "192\&.168\&.0\&.1" >@sysconfdir@/ipout\&.192\&.168\&.0\&.1
# echo "fec0::230:48ff:fec4:429c" >@sysconfdir@/ip6out\&.192\&.168\&.0\&.1
.fi
.if n \{\
.RE
.\}
.PP
This means that when a client connects to the
Courier
mail server using the IP address
192\&.168\&.0\&.1
and relays a message, if the message gets forwarded to an IPv4 address,
Courier
uses the same IP address, and if it gets forwarded to an IPv6 address
Courier
uses this IPv6 address\&. The above also probably means that:
.sp
.if n \{\
.RS 4
.\}
.nf
# echo "192\&.168\&.0\&.1" >"@sysconfdir@/ipout\&.fec0::230:48ff:fec4:429c"
# echo "fec0::230:48ff:fec4:429c" >"@sysconfdir@/ipout\&.fec0::230:48ff:fec4:429c"
.fi
.if n \{\
.RE
.\}
.PP
So if an IPv6 client connects to
Courier
on this IPv6 address and relays a message,
Courier
uses the same IPv6 address, or
192\&.168\&.0\&.1
depending on the destination\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.PP
Notwithstanding the IP address set in an
ipout
or an
ip6out
file, the server\*(Aqs network configuration must be able to actually establish a network connection to the destination address from the explicitly specified IP address\&. Specifying an explicit IP address for outgoing connections implies that the IP addresses are fully and globally routable\&.
.sp .5v
.RE
.PP
Additionally, for all other configuration files described in this manual page, the
Courier
mail server uses
\(lqfilename\&.\fIaddress\fR\(rq
if it exists, in place of
\(lqfilename\(rq
when processing messages received from
\(lqaddress\(rq, either an IPv4 or an IPv6 address\&.
.PP
This is used in all contexts where it makes sense to do so:
.sp
.if n \{\
.RS 4
.\}
.nf
# echo "relay\&.example\&.com" >@sysconfdir@/me\&.192\&.168\&.0\&.1
# echo "firewall\&.example\&.com" >@sysconfdir@/me\&.192\&.168\&.1\&.1
.fi
.if n \{\
.RE
.\}
.PP
This example specifies
\(lqrelay\&.example\&.com\(rq
as the contents of the
me
configuration file, described earlier in this manual page, when processing messages received by clients that connect to
192\&.168\&.0\&.1, and
\(lqfirewall\&.example\&.com\(rq
for processing messages received by clients that connect to
192\&.168\&.1\&.1\&.
.PP
\(lqme\(rq
is the default hostname for most common
Courier
mail server configuration settings, such as the server\*(Aqs name in the ESMTP greeting banner, what
Courier
calls itself in the ESMTP
\fBEHLO/HELO\fR
commands, and other contexts, unless overridden by a more specific setting\&.
.if n \{\
.sp
.\}
.RS 4
.it 1 an-trap
.nr an-no-space-flag 1
.nr an-break-flag 1
.br
.ps +1
\fBNote\fR
.ps -1
.br
.PP
The IP address\-specific configuration settings get used only in the context of processing messages, and have no impact on other parts of the
Courier
mail server that do not have a direct relationship to a specific message\&. One such example would be when
Courier
authenticates a client\*(Aqs username or password\&. This is not directly related to any message the client may or may not send after it authenticates, so this happens in exactly the same way no matter which IP address the client connected to\&.
.sp .5v
.RE
.SS "Simulating a server with multiple IP addresses"
.PP
As described in the previous section, the existence of
vhost\&.\fIip\-address\fR
enables configuration settings only for messages that were received at one of the IP addresses that the
Courier
mail server accepts connections on\&.
.PP
It\*(Aqs possible to partially achieve the same end results by creating
vhost\&.\fIdomain\fR:
.sp
.if n \{\
.RS 4
.\}
.nf
# touch >@sysconfdir@/vhost\&.example\&.com
.fi
.if n \{\
.RE
.\}
.PP
This enables per\-message specific configuration for messages received from authenticated clients whose authenticated ID ends with
\(lq@example\&.com\(rq\&. If the server has more than one IP address, but, for whatever reason, only receives mail on one of them but wants to use the other one for outgoing mail for this domain:
.sp
.if n \{\
.RS 4
.\}
.nf
# echo \*(Aq192\&.168\&.0\&.1\*(Aq >@sysconfdir@/ipout\&.example\&.com
.fi
.if n \{\
.RE
.\}
.PP
This sets this IP address for all outgoing messages with a
\(lq@example\&.com\(rq
authenticated client\&. It\*(Aqs important to note the following limitations:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
The Courier authentication library (see installation instructions) must be configured with accounts and mailboxes that follow the
\(lquser@domain\(rq
format\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Not all configuration settings can be customized in a
\fIsetting\fR\&.\fIdomain\fR\&. The trivial example would be the ESMTP server banner\&. The mail server emits the banner before it\*(Aqs ready to receive the first message, so no return address\-based customization is possible, of course, to select an ESMTP server banner\&. Additionally, the
\(lqme\(rq
configuration setting gets set before the return address is received, so the contents of a domain\-specific
\(lqme\(rq
may not be in effect in all contexts\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Anyone can use any return address they wish\&. Some mitigation is possible, of course, using measures such as
SPF, but it would be mistake to believe that this is much more than just eye candy\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Both an IP address and domain\-based
\(lqvhost\(rqs are allowed\&. An IP address\-based vhost takes precedence\&.
.RE
.SH "BUGS"
.PP
Flushing a single message will not work if the message queue is backed up\&. When that happens, your only available option is to flush the entire queue\&.
.PP
\fBcourier start\fR
fails if the
Courier
mail server has detected a fatal operational error\&. In this situation the top\-level
\fBcourierd\fR
daemon sleeps for a minute, before automatically restarting\&. During this sleep interval courier stop does not work\&.
.SH "SEE ALSO"
.PP
\m[blue]\fB\fBcancelmsg\fR(1)\fR\m[]\&\s-2\u[12]\d\s+2,
\m[blue]\fB\fBmaildirmake\fR(1)\fR\m[]\&\s-2\u[10]\d\s+2,
\m[blue]\fB\fBmaildrop\fR(1)\fR\m[]\&\s-2\u[6]\d\s+2,
\m[blue]\fB\fBpreline\fR(1)\fR\m[]\&\s-2\u[15]\d\s+2,
\m[blue]\fB\fBsendmail\fR(1)\fR\m[]\&\s-2\u[16]\d\s+2,
\m[blue]\fB\fBtestmxlookup\fR(1)\fR\m[]\&\s-2\u[17]\d\s+2,
\m[blue]\fB\fBdot-courier\fR(5)\fR\m[]\&\s-2\u[4]\d\s+2,
\m[blue]\fB\fBauthlib\fR(7)\fR\m[]\&\s-2\u[18]\d\s+2,
\m[blue]\fB\fBcourierfax\fR(8)\fR\m[]\&\s-2\u[7]\d\s+2,
\m[blue]\fB\fBcourierfilter\fR(8)\fR\m[]\&\s-2\u[5]\d\s+2,
\m[blue]\fB\fBfilterctl\fR(8)\fR\m[]\&\s-2\u[5]\d\s+2,
\m[blue]\fB\fBcourierldapaliasd\fR(8)\fR\m[]\&\s-2\u[9]\d\s+2,
\m[blue]\fB\fBcourierpop3d\fR(8)\fR\m[]\&\s-2\u[19]\d\s+2,
\m[blue]\fB\fBcourierpop3d\fR(8)\fR\m[]\&\s-2\u[19]\d\s+2,
\m[blue]\fB\fBcouriertcpd\fR(8)\fR\m[]\&\s-2\u[14]\d\s+2,
\m[blue]\fB\fBcourieruucp\fR(8)\fR\m[]\&\s-2\u[13]\d\s+2,
\m[blue]\fB\fBesmtpd\fR(8)\fR\m[]\&\s-2\u[20]\d\s+2,
\m[blue]\fB\fBimapd\fR(8)\fR\m[]\&\s-2\u[21]\d\s+2,
\m[blue]\fB\fBlocalmailfilter\fR(7)\fR\m[]\&\s-2\u[2]\d\s+2,
\m[blue]\fB\fBmailq\fR(1)\fR\m[]\&\s-2\u[1]\d\s+2,
\m[blue]\fB\fBmakeacceptmailfor\fR(8)\fR\m[]\&\s-2\u[22]\d\s+2,
\m[blue]\fB\fBmakealiases\fR(8)\fR\m[]\&\s-2\u[23]\d\s+2,
\m[blue]\fB\fBmakehosteddomains\fR(8)\fR\m[]\&\s-2\u[8]\d\s+2,
\m[blue]\fB\fBmakepercentrelay\fR(8)\fR\m[]\&\s-2\u[24]\d\s+2,
\m[blue]\fB\fBmakesmtpaccess\fR(8)\fR\m[]\&\s-2\u[3]\d\s+2,
\m[blue]\fB\fBmakeuserdb\fR(8)\fR\m[]\&\s-2\u[25]\d\s+2,
\m[blue]\fB\fBpw2userdb\fR(8)\fR\m[]\&\s-2\u[25]\d\s+2,
\m[blue]\fB\fBmkdhparams\fR(8)\fR\m[]\&\s-2\u[26]\d\s+2,
\m[blue]\fB\fBmkesmtpdcert\fR(8)\fR\m[]\&\s-2\u[27]\d\s+2,
\m[blue]\fB\fBmkimapdcert\fR(8)\fR\m[]\&\s-2\u[28]\d\s+2,
\m[blue]\fB\fBpop3d\fR(8)\fR\m[]\&\s-2\u[29]\d\s+2,
\m[blue]\fB\fBsubmit\fR(8)\fR\m[]\&\s-2\u[30]\d\s+2,
\m[blue]\fB\fBuserdb\fR(8)\fR\m[]\&\s-2\u[31]\d\s+2\&.
.SH "AUTHOR"
.PP
\fBSam Varshavchik\fR
.RS 4
Author
.RE
.SH "NOTES"
.IP " 1." 4
\fBmailq\fR(1)
.RS 4
\%http://www.courier-mta.org/mailq.html
.RE
.IP " 2." 4
\fBlocalmailfilter\fR(7)
.RS 4
\%http://www.courier-mta.org/localmailfilter.html
.RE
.IP " 3." 4
\fBmakesmtpaccess\fR(8)
.RS 4
\%http://www.courier-mta.org/makesmtpaccess.html
.RE
.IP " 4." 4
\fBdot-courier\fR(5)
.RS 4
\%http://www.courier-mta.org/dot-courier.html
.RE
.IP " 5." 4

\fBcourierfilter\fR(8)
.RS 4
\%http://www.courier-mta.org/courierfilter.html
.RE
.IP " 6." 4

\fBmaildrop\fR(1)
.RS 4
\%http://www.courier-mta.org/maildrop.html
.RE
.IP " 7." 4
\fBcourierfax\fR(8)
.RS 4
\%http://www.courier-mta.org/courierfax.html
.RE
.IP " 8." 4
\fBmakehosteddomains\fR(8)
.RS 4
\%http://www.courier-mta.org/makehosteddomains.html
.RE
.IP " 9." 4
\fBcourierldapaliasd\fR(8)
.RS 4
\%http://www.courier-mta.org/courierldapaliasd.html
.RE
.IP "10." 4
\fBmaildirmake\fR(1)
.RS 4
\%http://www.courier-mta.org/maildirmake.html
.RE
.IP "11." 4
\fBmaildropfilter\fR(6)
.RS 4
\%http://www.courier-mta.org/maildropfilter.html
.RE
.IP "12." 4
\fBcancelmsg\fR(1)
.RS 4
\%http://www.courier-mta.org/cancelmsg.html
.RE
.IP "13." 4
\fBcourieruucp\fR(8)
.RS 4
\%http://www.courier-mta.org/courieruucp.html
.RE
.IP "14." 4
\fBcouriertcpd\fR(1)
	
.RS 4
\%http://www.courier-mta.org/couriertcpd.html
.RE
.IP "15." 4

\fBpreline\fR(1)
.RS 4
\%http://www.courier-mta.org/preline.html
.RE
.IP "16." 4

\fBsendmail\fR(1)
.RS 4
\%http://www.courier-mta.org/sendmail.html
.RE
.IP "17." 4

\fBtestmxlookup\fR(1)
.RS 4
\%http://www.courier-mta.org/testmxlookup.html
.RE
.IP "18." 4

\fBauthlib\fR(7)
.RS 4
\%http://www.courier-mta.org/authlib.html
.RE
.IP "19." 4

\fBcourierpop3d\fR(8)
.RS 4
\%http://www.courier-mta.org/courierpop3d.html
.RE
.IP "20." 4

\fBesmtpd\fR(8)
.RS 4
\%http://www.courier-mta.org/esmtpd.html
.RE
.IP "21." 4

\fBimapd\fR(8)
.RS 4
\%http://www.courier-mta.org/imapd.html
.RE
.IP "22." 4

\fBmakeacceptmailfor\fR(8)
.RS 4
\%http://www.courier-mta.org/makeacceptmailfor.html
.RE
.IP "23." 4

\fBmakealiases\fR(8)
.RS 4
\%http://www.courier-mta.org/makealiases.html
.RE
.IP "24." 4

\fBmakepercentrelay\fR(8)
.RS 4
\%http://www.courier-mta.org/makepercentrelay.html
.RE
.IP "25." 4

\fBmakeuserdb\fR(8)
.RS 4
\%http://www.courier-mta.org/makeuserdb.html
.RE
.IP "26." 4

\fBmkdhparams\fR(8)
.RS 4
\%http://www.courier-mta.org/mkdhparams.html
.RE
.IP "27." 4

\fBmkesmtpdcert\fR(8)
.RS 4
\%http://www.courier-mta.org/mkesmtpdcert.html
.RE
.IP "28." 4

\fBmkimapdcert\fR(8)
.RS 4
\%http://www.courier-mta.org/mkimapdcert.html
.RE
.IP "29." 4

\fBpop3d\fR(8)
.RS 4
\%http://www.courier-mta.org/pop3d.html
.RE
.IP "30." 4

\fBsubmit\fR(8)
.RS 4
\%http://www.courier-mta.org/submit.html
.RE
.IP "31." 4

\fBuserdb\fR(8)
.RS 4
\%http://www.courier-mta.org/userdb.html
.RE
